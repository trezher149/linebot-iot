<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EnviroNotify LIFF</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/versions/2.22.3/sdk.js"></script>
    <link rel="stylesheet" href="../static/style.css">
</head>
<body>
    <h1>Status</h1>
    <p id="status">Waiting for LIFF</p>
    <script>
        liff.init({
            liffId: '2002540804-7koJoM5b', // Use own liffId
            withLoginOnExternalBrowser: true, // Enable automatic login process
        }).then(() => {
            document.getElementById('status').textContent = 'LIFF is ready';
            // start to use LIFF's api
        }).catch((err) => {
            document.getElementById('status').textContent = 'Something went wrong';
        });
    </script>

    <h1>Report Environment</h1>
    <div>
        <canvas id="myChart"></canvas>
    </div>
    <script>
        const config = {
        type: 'line',
        data: data,
        };
    
        const labels = Array.from({ length: 15 }, (_, index) => index + 1);
        const data = {
          labels: labels,
          datasets: [
            {
              label: 'Humidity',
              data: [65, 59, 80, 81, 56, 55, 40], //example data
              fill: false,
              borderColor: 'rgb(0, 128, 255)',
              tension: 0.1
            },{
              label: 'Temperature',
              data: [65, 59, 80, 83, 56, 55, 40], //example data
              fill: false,
              borderColor: 'rgb(255, 1, 127)',
              tension: 0.1
            },{
              label: 'Pressure',
              data: [65, 59, 80, 83, 56, 55, 40], //example data
              fill: false,
              borderColor: 'rgb(75, 192, 192)',
              tension: 0.1
            }]
        };
      </script>
    
      {% if data %}
    
      <ul>
        <li><strong>Timestamp:</strong> {{ data["timestamp"] }}</li>
        <li><strong>Humidity:</strong> {{ data["humidity"] }} %</li>
        <li><strong>Temperature:</strong> {{ data["temperature"] }} °C</li>
        <li><strong>Pressure:</strong> {{ data["pressure"] }} hPa</li>
      </ul>
      {% else %}
      <p>ไม่พบข้อมูล</p>
      {% endif %}
</body>
</html>